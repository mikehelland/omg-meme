<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title>OMG Creator</title>
	<link rel="stylesheet" href="css/likeomg.css" type="text/css" />
	<link rel="stylesheet" href="css/omeme_creator.css" type="text/css" />
	<link rel="stylesheet" href="/css/viewer.css" type="text/css" />
</head>

<body>


	<!--<div id="topbar">

	<a href="/">home</a> &gt; 
	Create a Meme
	
  </div>-->
	<div id="main-body">
		<div id="top-panels">

			<div id="detail-tab-frame">

				<div class="main-tabs">
					<div id="background-tab" class="selected-main-tab">Background</div>
					<div id="doodle-tab" class="main-tab">Doodle</div>
					<div id="character-tab" class="main-tab">Characters</div>
					<div id="dialog-tab" class="main-tab">Dialog</div>
					<div id="soundtrack-tab" class="main-tab">Soundtrack</div>
					<div id="submit-tab" class="main-tab">Save</div>					
				</div>

				<div class="detail-page" id="background-page">

					<div class="tab-page-info">Drop a background image on the canvas.</div>
					<hr>
					<div id="background-page-url" class="tab-page-info">Or enter a URL: <input class="url-input" id="background-page-url-input"></div>
					<hr>
					<div class="tab-page-info">Or choose from the gallery:</div>
					<br>
					<div class="row-list">
					</div>

				</div>

				<div class="detail-page" id="character-page">
				</div>

				<div class="detail-page" id="dialog-page">
					<strong>Add a Dialog Bubble </strong>
					<p>
						<input id="dialog-text" placeholder="enter text" type="text">
						Animate: <input type="checkbox" id="dialog-animate" checked="checked">
					</p>
					<p>
						Enter some Text in the box above and then click on the
						scene when and where it should appear.
					</p>
					<div class="dialog-list"></div>
				</div>

				<div class="detail-page" id="soundtrack-page">

					<div id="soundtrack-browse">
						<button id="soundtrack-create">Create</button> <button id="soundtrack-record">Record</button>
						<hr>
						<div class="search-box">
						</div>
					</div>
					<div id="soundtrack-remixer"></div>

				</div>
				<div class="detail-page" id="doodle-page">
					Color: <input type="color" id="doodle-color" value="#ff0000">
					Line Width: <input type="number" id="doodle-width" min="1" max="20" value="5">
					Animate: <input type="checkbox" id="doodle-animate" checked="checked">
				</div>
				<div class="detail-page" id="submit-page">

					<input type="hidden" name="type" value="MEME"></input>
					<input type="hidden" name="redirect" value="true"></input>
					<input id="custom-json" type="hidden" name="data"></input>
					<input id="submit-picture-input" type="hidden" name="picture"></input>

					<div class="main-tab-input-group">
						Name: <br />
						<input type="text" id="main-name-input" placeholder="(untitled)"></input> 
					</div>
					<div class="main-tab-input-group">
						Tags: <br />
						<input type="text" id="main-tags-input" placeholder="tag1, tag2, tag3...."></input> <br />
					</div>

					<div id="fresh-save-panel">
						<p>Your meme is not saved yet! Give it a name, and hit this button:</p>
						<button id="post-button" class="next-button">Save</button> 
					</div>

					<div id="save-option-panel">
						<p>What do you want to do?</p>
						<button id="post-button-overwrite" class="next-button">Save (Overwrite)</button> 
						- or - 
						<button id="post-button-new-copy" class="next-button">Save (Make New Copy)</button>	
					</div>
					<hr>
					<a target="_blank" href="/">OMG Home</a>

				</div>
			</div>

			<div id="preview-window">
			</div>

		</div>

		<div id="top-bottom-separator"></div>

		<div id="play-seek-controls"></div>

		<div id="layer-panel">
			<div id="layer-list"></div>
			<div id="playhead"></div>
		</div>

	</div>
	<div id="fullscreen-window-background">
	</div>

	<script src="/js/omgservice.js"></script>

	<script src="/js/embedded_viewer.js"></script>

	<script src="/apps/sprite/spriter.js"></script>

	<script src="/apps/music/js/omusic_player.js"></script>
	
	<script src="js/omeme_player.js"></script>

	<script type="module">
		import MemeCreator from "./js/omeme_creator.js"

		var urlNextButton = document.getElementById("picture-url-next");
		var step1 = document.getElementById("step-1");
		var step2 = document.getElementById("step-2");
		var step3 = document.getElementById("step-3");
		var imgInput = document.getElementById("picture-input");
		var youtubeInput = document.getElementById("youtube-input");

		var memePlayerDiv = document.getElementById("preview-window");
		
		setupLayout(memePlayerDiv);


		var memeCreator = new MemeCreator({ playerDiv: memePlayerDiv });


		function setupLayout(previewWindow) {
			var div = previewWindow;
			if (window.innerWidth < window.innerHeight) {
				div.style.top = "0px";
				previewWindow.style.position = "static";
				previewWindow.style.position = "relative";
				var left = window.innerWidth / 2 - div.clientWidth / 2;
				console.log(div.clientWidth);
				div.style.left = left + "px";

				document.getElementById("detail-tab-frame").style.margin = "auto"
			}

		}
	</script>

</body>

</html>